services:
  steamshine:
    build: .
    image: ghcr.io/${GITHUB_REPOSITORY:-cmmmota/steamshine}
    volumes:
      - steam-data:/home/steamshine/.steam
      - sunshine-config:/home/steamshine/.config/sunshine
    environment:
      - STEAM_RUNTIME=0
    devices:
      - /dev/dri:/dev/dri
    privileged: true
    cap_add:
      - SYS_NICE
    security_opt:
      - seccomp:unconfined
    group_add:
      - video

volumes:
  steam-data:
    name: steamshine-steam-data
  sunshine-config:
    name: steamshine-sunshine-config 