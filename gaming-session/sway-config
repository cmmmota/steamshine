# Sway headless configuration for game streaming
output HEADLESS-1 {
    mode __WIDTH__x__HEIGHT__@__REFRESH__Hz
    scale 1
}

bar {
    mode invisible
    tray_output none
}

# Blue background to verify stream capture is working
output * bg #000080 solid_color

# Start Steam inside Gamescope via wrapper for logging
# -f: Fullscreen
# --xwayland-count 1: Pre-initialize XWayland
# We unset WLR_BACKENDS and WLR_RENDERER to ensure gamescope nests inside Sway
exec env -u WLR_BACKENDS -u WLR_RENDERER gamescope --expose-wayland --xwayland-count 1 -W __WIDTH__ -H __HEIGHT__ -r __REFRESH__ -f __HDR_ARGS__ -- /home/gamer/steam-wrapper.sh

# Key bindings
bindsym Mod4+Return exec foot
bindsym Mod4+Shift+q kill
bindsym Mod4+Shift+e exit

# Input configuration
input * {
    accel_profile flat
}
